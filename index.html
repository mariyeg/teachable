<!DOCTYPE html>
<html>
<head>
    <title>Teachable Machine Debug</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></scriptdn.jsdelivr.net/npm/@teachablemachine/image
    
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        input[type="file"] { margin: 20px; }
        #result, #debug { margin-top: 20px; font-size: 1em; }
        #uploadedImage { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Modelo de Teachable Machine</h1>
    <p>Carga una imagen para hacer una predicci√≥n</p>
    <input type="file" accept="image/*" onchange="handleImageUpload(event)">
    <br>
    <img id="uploadedImage" width="300" style="display:none;" />
    <div id="result"></div>
    <div id="debug" style="color: gray;"></div>

    <script type="text/javascript">
        const URL = "https://teachablemachine.withgoogle.com/models/Vork4AlMC/";
        let model, maxPredictions;

        async function initModel() {
            try {
                document.getElementById("debug").innerText = "Cargando modelo...";
                const modelURL = URL + "model.json";
                const metadataURL = URL + "metadata.json";
                model = await tmImage.load(modelURL, metadataURL);
                maxPredictions = model.getTotalClasses();
                document.getElementById("debug").innerText = "‚úÖ Modelo cargado correctamente.";
                console.log("Modelo cargado con √©xito.");
            } catch (error) {
                document.getElementById("debug").innerText = "‚ùå Error al cargar el modelo.";
                console.error("Error al cargar el modelo:", error);
            }
        }

        async function handleImageUpload(event) {
            const image = document.getElementById("uploadedImage");
            const file = event.target.files[0];

            if (!file) {
                document.getElementById("debug").innerText = "‚ö†Ô∏è No se seleccion√≥ ninguna imagen.";
                return;
            }

            image.src = URL.createObjectURL(file);
            image.onload = async () => {
                image.style.display = "block";
                document.getElementById("debug").innerText = "üì∑ Imagen cargada. Procesando...";
                try {
                    const prediction = await model.predict(image);
                    let resultText = "";
                    prediction.forEach(p => {
                        resultText += `${p.className}: ${(p.probability * 100).toFixed(2)}%<br>`;
                    });
                    document.getElementById("result").innerHTML = resultText;
                    document.getElementById("debug").innerText = "‚úÖ Predicci√≥n completada.";
                    console.log("Predicci√≥n:", prediction);
                } catch (error) {
                    document.getElementById("debug").innerText = "‚ùå Error al hacer la predicci√≥n.";
                    console.error("Error en la predicci√≥n:", error);
                }
            };
        }

        window.onload = initModel;
    </script>
</body>
</html>


