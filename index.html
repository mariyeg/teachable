<!DOCTYPE html>
<html>
<head>
    <title>Teachable Machine Model</title>
    https://cdn.jsdelivr.net/npm/@tensorflow/tfjs
    https://cdn.jsdelivr.net/npm/@teachablemachine/image
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        input[type="file"] { margin: 20px; }
        #result { margin-top: 20px; font-size: 1.2em; }
    </style>
</head>
<body>
    <h1>Modelo de Teachable Machine</h1>
    <p>Carga una imagen para hacer una predicci√≥n</p>
    <input type="file" accept="image/*" onchange="handleImageUpload(event)">
    <br>
    <img id="uploadedImage" width="300" style="display:none;" />
    <div id="result"></div>

    <script type="text/javascript">
        const URL = "https://teachablemachine.withgoogle.com/models/Vork4AlMC/";
        let model, maxPredictions;

        async function initModel() {
            const modelURL = URL + "model.json";
            const metadataURL = URL + "metadata.json";
            model = await tmImage.load(modelURL, metadataURL);
            maxPredictions = model.getTotalClasses();
        }

        async function handleImageUpload(event) {
            const image = document.getElementById("uploadedImage");
            image.src = URL.createObjectURL(event.target.files[0]);
            image.onload = async () => {
                image.style.display = "block";
                const prediction = await model.predict(image);
                let resultText = "";
                prediction.forEach(p => {
                    resultText += `${p.className}: ${(p.probability * 100).toFixed(2)}%<br>`;
                });
                document.getElementById("result").innerHTML = resultText;
            };
        }

        window.onload = initModel;
    </script>
</body>
</html>
